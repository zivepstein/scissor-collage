!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.triangulate=t()}}(function(){var t;return function t(e,n,r){function a(i,u){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var d=n[i]={exports:{}};e[i][0].call(d.exports,function(t){var n=e[i][1][t];return a(n?n:t)},d,d.exports,t,e,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=function(t){function e(){return t}function n(){var t=a({},R);return N||a(t,J),t}function r(){var t=a({},R);return W||a(t,A),t}function o(t){return P(l.default,t)}function u(t){return P(l.default,t,!0)}function f(t){return P(function(t){return t},t)}function s(t){return P(function(t){return t},t,!0)}function g(t){return k(function(t){return t},t)}function p(t){return k(function(t){return t},t,!0)}function m(t){return k(c.default,t)}function x(t){return k(c.default,t,!0)}function w(t){return k(d.default,t)}function _(t){return k(d.default,t,!0)}function C(t){return k(y.default,t)}function M(t){return k(y.default,t,!0)}function P(t,e,n){return T=!!n,N=function(){return T?t(e):new Promise(function(n,r){try{var a=t(e);n(a)}catch(t){r(t)}})},D()?O():r()}function k(t,e,r){return B=!!r,W=function(n,r){return B?t(n,r,e):new Promise(function(a,o){try{var i=t(n,r,e);a(i)}catch(t){o(t)}})},D()?O():n()}function D(){return N&&W}function O(){if(T&&B){var e=N(t),n=(0,h.default)(e,t),r=W(n,e);return r}return new Promise(function(e,n){var r;j().then(function(e){return r=e,I(r,t)},n).then(function(t){return S(t,r)},n).then(function(t){e(t)},n)})}function j(t){return new Promise(function(e,n){if(T)try{var r=N(t);e(r)}catch(t){n(t)}else N(t).then(e,n)})}function I(t,e){return new Promise(function(n,r){E.addEventListener("message",function(t){if(t.data&&t.data.polygonJSONStr){var e=JSON.parse(t.data.polygonJSONStr);n(e)}else r(t.data&&t.data.err?t.data.err:t)}),E.postMessage({params:e,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})})}function S(t,e){return new Promise(function(n,r){if(B)try{var a=W(t,e);n(a)}catch(t){r(t)}else W(t,e).then(n,r)})}t=(0,i.default)(t);var T=!1,B=!1,E=(0,v.default)(b.default),N=void 0,W=void 0,R={getParams:e,getInput:n,getOutput:r},J={fromImage:o,fromImageSync:u,fromImageData:f,fromImageDataSync:s},A={toData:g,toDataSync:p,toDataURL:m,toDataURLSync:x,toImageData:w,toImageDataSync:_,toSVG:C,toSVGSync:M};return n()};var o=t("./input/sanitizeInput"),i=r(o),u=t("./input/browser/fromImageToImageData"),l=r(u),f=t("./output/polygonsToImageData"),d=r(f),s=t("./output/polygonsToDataURL"),c=r(s),g=t("./output/polygonsToSVG"),y=r(g),p=t("./polygons/imageDataToPolygons"),h=r(p),m=t("webworkify"),v=r(m),x=t("./workers/triangulationWorker"),b=r(x);e.exports=n.default},{"./input/browser/fromImageToImageData":4,"./input/sanitizeInput":6,"./output/polygonsToDataURL":7,"./output/polygonsToImageData":8,"./output/polygonsToSVG":9,"./polygons/imageDataToPolygons":16,"./workers/triangulationWorker":30,webworkify:35}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=(0,i.default)(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),n.getImageData(0,0,t.width,t.height)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if((0,l.default)(t)){if("undefined"==typeof Uint8ClampedArray){if("undefined"==typeof window)throw new Error("Can't copy imageData in webworker without Uint8ClampedArray support.");return a(t)}var e=new Uint8ClampedArray(t.data);if("undefined"==typeof ImageData)return{width:t.width,height:t.height,data:e};var n=void 0;try{n=new ImageData(e,t.width,t.height)}catch(e){if("undefined"==typeof window)throw new Error("Can't copy imageData in webworker without proper ImageData() support.");n=a(t)}return n}throw new Error("Given imageData object is not useable.")};var o=t("canvas-browserify"),i=r(o),u=t("../util/isImageData"),l=r(u);e.exports=n.default},{"../util/isImageData":23,"canvas-browserify":31}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){for(var e=t.data.length,n=void 0,r=0;r<e;r+=4)n=.34*t.data[r]+.5*t.data[r+1]+.16*t.data[r+2],t.data[r]=n,t.data[r+1]=n,t.data[r+2]=n;return t},e.exports=n.default},{}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||t.complete===!1)throw new Error("This this image hasn't finished loading: "+t.src);var e=new o.default(t.naturalWidth,t.naturalHeight),n=e.getContext("2d");n.drawImage(t,0,0,e.width,e.height);var r=n.getImageData(0,0,e.width,e.height);return r.data&&r.data.length&&("undefined"==typeof r.width&&(r.width=t.naturalWidth),"undefined"==typeof r.height&&(r.height=t.naturalHeight)),r}throw new Error("This object does not seem to be an image.")};var a=t("canvas-browserify"),o=r(a);o.default.Image;e.exports=n.default},{"canvas-browserify":31}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={accuracy:.7,blur:4,fill:!0,stroke:!0,strokeWidth:.5,lineJoin:"miter",vertexCount:700,threshold:50,transparentColor:!1},e.exports=n.default},{}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n.default=function(t){return t=(0,l.default)(t),"object"!==("undefined"==typeof t?"undefined":a(t))&&(t={}),"number"!=typeof t.accuracy||isNaN(t.accuracy)?t.accuracy=c.default.accuracy:t.accuracy=(0,i.default)(t.accuracy,0,1),("number"!=typeof t.blur||isNaN(t.blur))&&(t.blur=c.default.blur),t.blur<=0&&(t.blur=1),"string"!=typeof t.fill&&"boolean"!=typeof t.fill&&(t.fill=c.default.fill),"string"!=typeof t.stroke&&"boolean"!=typeof t.stroke&&(t.stroke=c.default.stroke),("number"!=typeof t.strokeWidth||isNaN(t.strokeWidth))&&(t.strokeWidth=c.default.strokeWidth),"number"!=typeof t.threshold||isNaN(t.threshold)?t.threshold=c.default.threshold:t.threshold=(0,i.default)(t.threshold,1,100),"string"==typeof t.lineJoin&&g.indexOf(t.lineJoin)!==-1||(t.lineJoin=c.default.lineJoin),t.gradients&&t.fill?t.gradients=!0:t.gradients=!1,t.gradients&&(("number"!=typeof t.gradientStops||isNaN(t.gradientStops)||t.gradientStops<2)&&(t.gradientStops=2),t.gradientStops=Math.round(t.gradientStops)),("number"!=typeof t.vertexCount||isNaN(t.vertexCount))&&(t.vertexCount=c.default.vertexCount),t.vertexCount<=0&&(t.vertexCount=1),"string"!=typeof t.transparentColor&&"boolean"!=typeof t.transparentColor&&(t.transparentColor=c.default.transparentColor),typeof t.transparentColor===!0&&(t.transparentColor=!1),"string"==typeof t.transparentColor&&(t.transparentColor=(0,d.default)(t.transparentColor)),t};var o=t("../util/clamp"),i=r(o),u=t("../util/clone"),l=r(u),f=t("../util/toColor"),d=r(f),s=t("./defaultParams"),c=r(s),g=["miter","round","bevel"];e.exports=n.default},{"../util/clamp":17,"../util/clone":18,"../util/toColor":28,"./defaultParams":5}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=(0,o.default)(e,n,r);return(0,u.default)(a.ctx,t,e,r),a.canvas.toDataURL()};var a=t("../util/makeCanvasAndContext"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);e.exports=n.default},{"../util/drawPolygonsOnContext":20,"../util/makeCanvasAndContext":26}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=(0,o.default)(e,n,r,!0).ctx;return(0,u.default)(a,t,e,r),a.getImageData(0,0,e.width*r,e.height*r)};var a=t("../util/makeCanvasAndContext"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);e.exports=n.default},{"../util/drawPolygonsOnContext":20,"../util/makeCanvasAndContext":26}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n="";t.length&&t[0].gradient&&(n="<defs>");var r="";t.forEach(function(t,e){var a=t.a,i=t.b,u=t.c;r+='<polygon points="'+a.x+","+a.y+" "+i.x+","+i.y+" "+u.x+","+u.y+'"',t.gradient?!function(){var a=t.boundingBox,i=((t.gradient.x1-a.x)/a.width*100).toFixed(3),u=((t.gradient.y1-a.y)/a.height*100).toFixed(3),l=((t.gradient.x2-a.x)/a.width*100).toFixed(3),f=((t.gradient.y2-a.y)/a.height*100).toFixed(3);n+='\n\t<linearGradient id="gradient-'+e+'" x1="'+i+'%" y1="'+u+'%" x2="'+l+'%" y2="'+f+'%">';var d=t.gradient.colors.length-1;t.gradient.colors.forEach(function(t,e){var r=(0,o.default)(t),a=(e/d*100).toFixed(3);n+='\n\t\t\t\t\t<stop offset="'+a+'%" stop-color="'+r+'"/>\n\t\t\t\t'}),n+="</linearGradient>",r+=' fill="url(#gradient-'+e+')"',t.strokeWidth>0&&(r+=' stroke="url(#gradient-'+e+')" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"')}():(r+=t.fill?' fill="'+t.fill+'"':' fill="transparent"',t.strokeColor&&(r+=' stroke="'+t.strokeColor+'" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"')),r+="/>\n\t"}),n.length&&(n+="\n\t\t</defs>");var a='<?xml version="1.0" standalone="yes"?>\n<svg width="'+e.width+'" height="'+e.height+'" xmlns="http://www.w3.org/2000/svg" version="1.1" >\n\t'+n+"\n\t"+r+"\n</svg>";return a};var a=t("../util/toRGBA"),o=r(a);e.exports=n.default},{"../util/toRGBA":29}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){return t.forEach(function(t){t.boundingBox=(0,o.default)([t.a,t.b,t.c])}),t.filter(function(t){return t.boundingBox.width>0&&t.boundingBox.height>0})};var a=t("../util/getBoundingBox"),o=r(a);e.exports=n.default},{"../util/getBoundingBox":21}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r=n.fill,a=n.stroke,i=n.strokeWidth,l=n.lineJoin,d=n.transparentColor,c="string"==typeof r&&r,g="string"==typeof a&&a,y=function(t,e){var n=(0,f.default)(t)&&d,r=n?d:t;return e&&!n?e:(0,s.default)(r)};return t.forEach(function(t,n){var f=(0,o.default)((0,u.default)(t),e);r&&(t.fill=y(f,c)),a&&(t.strokeColor=y(f,g),t.strokeWidth=i,t.lineJoin=l)}),t};var a=t("../util/getColorByPos"),o=r(a),i=t("../util/polygonCenter"),u=r(i),l=t("../util/isTransparent"),f=r(l),d=t("../util/toRGBA"),s=r(d);e.exports=n.default},{"../util/getColorByPos":22,"../util/isTransparent":24,"../util/polygonCenter":27,"../util/toRGBA":29}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){return t.forEach(function(t,r){var a={};"abc".split("").forEach(function(r){var i=(0,f.default)(t[r],e,n.transparentColor);a[r]={key:r,color:i,x:t[r].x,y:t[r].y},a[r].luminance=(0,o.default)(a[r].color);var u="abc".replace(r,"").split("");a[r].median={x:(t[u[0]].x+t[u[1]].x)/2,y:(t[u[0]].y+t[u[1]].y)/2},a[r].medianColor=(0,f.default)(a[r].median,e,n.transparentColor),a[r].medianLuminance=(0,o.default)(a[r].medianColor)});for(var i=[a.a,a.b,a.c].sort(function(t,e){return Math.abs(t.luminance-t.medianLuminance)-Math.abs(e.luminance-e.medianLuminance)}),l=i[0],d=i[0],s=l.median,c=[d],g=(0,u.default)(d,s),y=1,p=n.gradientStops-2;y<p;y++){var h=y*(g/n.gradientStops),m=h/g,v={x:d.x+m*(s.x-d.x),y:d.y+m*(s.y-d.y)};c.push(v)}c.push(s),t.gradient={x1:l.x,y1:l.y,x2:l.median.x,y2:l.median.y,colors:c.map(function(t){return(0,f.default)(t,e,n.transparentColor)})},n.stroke&&(t.strokeWidth=n.strokeWidth,t.lineJoin=n.lineJoin),a=null}),t};var a=t("../util/luminance"),o=r(a),i=t("../util/distance"),u=r(i),l=t("../util/getColorByPos"),f=r(l);e.exports=n.default},{"../util/distance":19,"../util/getColorByPos":22,"../util/luminance":25}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){return t.filter(function(t){var n=(0,o.default)((0,u.default)(t),e);return!(0,f.default)(n)})};var a=t("../util/getColorByPos"),o=r(a),i=t("../util/polygonCenter"),u=r(i),l=t("../util/isTransparent"),f=r(l);e.exports=n.default},{"../util/getColorByPos":22,"../util/isTransparent":24,"../util/polygonCenter":27}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n,r,a,o,i,u,l,f,d,s=2,c=t.width,g=t.height,y=t.data,p=[];for(r=0;r<g;r+=s)for(n=0;n<c;n+=s){for(f=d=0,a=-1;a<=1;a++)if(u=r+a,l=u*c,u>=0&&u<g)for(o=-1;o<=1;o++)i=n+o,i>=0&&i<c&&(f+=y[i+l<<2],d++);d&&(f/=d),f>e&&p.push({x:n,y:r})}return p},e.exports=n.default},{}],15:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){var r=t+"|"+e;n[r]||(n[r]={x:t,y:e}),r=null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n,r,o){var i={},u=Math.max(~~(e*(1-n)),5),l=Math.round(Math.sqrt(u)),f=Math.round(Math.ceil(u/l)),d=~~(r/l),s=~~(o/f),c=0,g=0,y=0,p=0;for(p=0;p<o;p+=s)for(c++,g=c%2===0?~~(d/2):0,y=g;y<r;y+=d)y<r&&p<o&&a(~~(y+Math.cos(p)*s),~~(p+Math.sin(y)*d),i);a(0,0,i),a(r-1,0,i),a(r-1,o-1,i),a(0,o-1,i);var h=e-Object.keys(i).length,m=t.length,v=~~(m/h);if(e>0&&v>0){var x=0;for(x=0;x<m;x+=v)a(t[x].x,t[x].y,i)}return t=null,Object.keys(i).map(function(t){return i[t]})};var o=t("../util/clamp");r(o);e.exports=n.default},{"../util/clamp":17}],16:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){if((0,f.default)(t)){var n={width:t.width,height:t.height},r=(0,s.default)(t),i=(0,s.default)(t),l=(0,a.imageDataRGBA)(r,0,0,n.width,n.height,e.blur),d=(0,g.default)(l),c=(0,u.default)(d).toImageData(),y=(0,p.default)(c,e.threshold),h=(0,m.default)(y,e.vertexCount,e.accuracy,n.width,n.height),v=(0,o.triangulate)(h);return v=(0,x.default)(v),e.transparentColor||(v=(0,P.default)(v,i)),v=e.fill===!0&&e.gradients===!0?(0,C.default)(v,i,e):(0,w.default)(v,i,e)}throw new Error("Can't work with the imageData provided. It seems to be corrupt.")};var a=t("stackblur-canvas"),o=t("delaunay-fast"),i=t("sobel"),u=r(i),l=t("../util/isImageData"),f=r(l),d=t("../imagedata/copyImageData"),s=r(d),c=t("../imagedata/greyscale"),g=r(c),y=t("./getEdgePoints"),p=r(y),h=t("./getVerticesFromPoints"),m=r(h),v=t("./addBoundingBoxesToPolygons"),x=r(v),b=t("./addColorToPolygons"),w=r(b),_=t("./addGradientsToPolygons"),C=r(_),M=t("./filterTransparentPolygons"),P=r(M);e.exports=n.default},{"../imagedata/copyImageData":2,"../imagedata/greyscale":3,"../util/isImageData":23,"./addBoundingBoxesToPolygons":10,"./addColorToPolygons":11,"./addGradientsToPolygons":12,"./filterTransparentPolygons":13,"./getEdgePoints":14,"./getVerticesFromPoints":15,"delaunay-fast":32,sobel:33,"stackblur-canvas":34}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){return t<e?e:t>n?n:t},e.exports=n.default},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=!1;if("undefined"!=typeof t)try{e=JSON.parse(JSON.stringify(t))}catch(t){}return e},e.exports=n.default},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},e.exports=n.default},{}],20:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n,r){return r=r||1,e.forEach(function(e,n){t.beginPath(),t.moveTo(e.a.x*r,e.a.y*r),t.lineTo(e.b.x*r,e.b.y*r),t.lineTo(e.c.x*r,e.c.y*r),t.lineTo(e.a.x*r,e.a.y*r),e.gradient?!function(){var n=t.createLinearGradient(e.gradient.x1*r,e.gradient.y1*r,e.gradient.x2*r,e.gradient.y2*r),a=e.gradient.colors.length-1;e.gradient.colors.forEach(function(t,e){var r=(0,o.default)(t);n.addColorStop(e/a,r)}),t.fillStyle=n,t.fill(),e.strokeWidth>0&&(t.strokeStyle=n,t.lineWidth=e.strokeWidth*r,t.lineJoin=e.lineJoin,t.stroke())}():(e.fill&&(t.fillStyle=e.fill,t.fill()),e.strokeColor&&(t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeWidth*r,t.lineJoin=e.lineJoin,t.stroke())),t.closePath()}),t};var a=t("./toRGBA"),o=r(a);e.exports=n.default},{"./toRGBA":29}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=1/0,n=-(1/0),r=1/0,a=-(1/0);return t.forEach(function(t){t.x<e&&(e=t.x),t.y<r&&(r=t.y),t.x>n&&(n=t.x),t.y>a&&(a=t.y)}),{x:e,y:r,width:n-e,height:a-r}},e.exports=n.default},{}],22:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){var r=(0,i.default)(t.x,1,e.width-2),a=(0,i.default)(t.y,1,e.height-2),o=(0|r)+(0|a)*e.width<<2;o>=e.data.length&&(o=e.data.length-5);var u=e.data[o+3]/255;return n&&0===u?n:{r:e.data[o],g:e.data[o+1],b:e.data[o+2],a:u}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;var o=t("./clamp"),i=r(o);e.exports=n.default},{"./clamp":17}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n.default=function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length&&"object"===r(t.data)},e.exports=n.default},{}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return 0===t.a},e.exports=n.default},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=[t.r,t.g,t.b].map(function(t){return t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*e[0]+.7152*e[1]+.0722*e[2]},e.exports=n.default},{}],26:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n,r){var a=!(!e||!e.backgroundColor)&&e.backgroundColor,i=new o.default(t.width*n,t.height*n,r),u=i.getContext("2d");return a&&(u.fillStyle=a,u.fillRect(0,0,t.width*n,t.height*n),u.fillStyle="transparent"),{canvas:i,ctx:u}};var a=t("canvas-browserify"),o=r(a);e.exports=n.default},{"canvas-browserify":31}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return{x:.33333*(t.a.x+t.b.x+t.c.x),y:.33333*(t.a.y+t.b.y+t.c.y)}},e.exports=n.default},{}],28:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=1,n=(0,o.default)({width:e,height:e},{},1,!0).ctx;n.fillStyle=t,n.fillRect(0,0,e,e);var r=n.getImageData(0,0,e,e).data;return{r:r[0],g:r[1],b:r[2],a:r[3]/255}};var a=t("./makeCanvasAndContext"),o=r(a);e.exports=n.default},{"./makeCanvasAndContext":26}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.default=function(t){var e=r({a:1},t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},e.exports=n.default},{}],30:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){t.addEventListener("message",function(e){if(e.data.imageData&&e.data.params)try{var n=e.data.imageData;"undefined"==typeof n.width&&"number"==typeof e.data.imageDataWidth&&(n.width=e.data.imageDataWidth),"undefined"==typeof n.height&&"number"==typeof e.data.imageDataHeight&&(n.height=e.data.imageDataHeight);var r=(0,i.default)(e.data.imageData,e.data.params);t.postMessage({polygonJSONStr:JSON.stringify(r)})}catch(e){t.postMessage({err:e.message||e})}else e.data.imageData?t.postMessage({err:"Parameters are missing."}):t.postMessage({err:"ImageData is missing."});t.close()})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a;var o=t("../polygons/imageDataToPolygons"),i=r(o);e.exports=n.default},{"../polygons/imageDataToPolygons":16}],31:[function(t,e,n){var r=e.exports=function(t,e){var n=document.createElement("canvas");return n.width=t||300,n.height=e||150,n};r.Image=function(){var t=document.createElement("img");return t}},{}],32:[function(t,e,n){function r(t,e,n){this.a=t,this.b=e,this.c=n;var r,a,o,i,u=e.x-t.x,l=e.y-t.y,f=n.x-t.x,d=n.y-t.y,s=u*(t.x+e.x)+l*(t.y+e.y),c=f*(t.x+n.x)+d*(t.y+n.y),g=2*(u*(n.y-e.y)-l*(n.x-e.x));Math.abs(g)<1e-6?(r=Math.min(t.x,e.x,n.x),a=Math.min(t.y,e.y,n.y),o=.5*(Math.max(t.x,e.x,n.x)-r),i=.5*(Math.max(t.y,e.y,n.y)-a),this.x=r+o,this.y=a+i,this.r=o*o+i*i):(this.x=(d*s-l*c)/g,this.y=(u*c-f*s)/g,o=this.x-t.x,i=this.y-t.y,this.r=o*o+i*i)}function a(t,e){return e.x-t.x}function o(t){var e,n,r,a,o,i=t.length;t:for(;i;)for(n=t[--i],e=t[--i],r=i;r;)if(o=t[--r],a=t[--r],e===a&&n===o||e===o&&n===a){t.splice(i,2),t.splice(r,2),i-=2;continue t}}function i(t){if(t.length<3)return[];t.sort(a);for(var e=t.length-1,n=t[e].x,i=t[0].x,u=t[e].y,l=u;e--;)t[e].y<u&&(u=t[e].y),t[e].y>l&&(l=t[e].y);var f,d,s,c=i-n,g=l-u,y=c>g?c:g,p=.5*(i+n),h=.5*(l+u),m=[new r({x:p-20*y,y:h-y,__sentinel:!0},{x:p,y:h+20*y,__sentinel:!0},{x:p+20*y,y:h-y,__sentinel:!0})],v=[],x=[];for(e=t.length;e--;){for(x.length=0,f=m.length;f--;)c=t[e].x-m[f].x,c>0&&c*c>m[f].r?(v.push(m[f]),m.splice(f,1)):(g=t[e].y-m[f].y,c*c+g*g>m[f].r||(x.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1)));for(o(x),f=x.length;f;)s=x[--f],d=x[--f],m.push(new r(d,s,t[e]))}for(Array.prototype.push.apply(v,m),e=v.length;e--;)(v[e].a.__sentinel||v[e].b.__sentinel||v[e].c.__sentinel)&&v.splice(e,1);return v}r.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.lineTo(this.c.x,this.c.y),t.closePath(),t.stroke()},"undefined"!=typeof e&&(e.exports={Triangle:r,triangulate:i})},{}],33:[function(e,n,r){!function(e){"use strict";function a(t){function e(t){return function(e,n,r){return r=r||0,t[4*(o*n+e)+r]}}if(!(this instanceof a))return new a(t);var n,r,o=t.width,i=t.height,u=[[-1,0,1],[-2,0,2],[-1,0,1]],l=[[-1,-2,-1],[0,0,0],[1,2,1]],f=[],d=[],s=t.data,c=e(s);for(r=0;r<i;r++)for(n=0;n<o;n++){var g=c(n,r,0),y=c(n,r,1),p=c(n,r,2),h=(g+y+p)/3;d.push(h,h,h,255)}for(c=e(d),r=0;r<i;r++)for(n=0;n<o;n++){var m=u[0][0]*c(n-1,r-1)+u[0][1]*c(n,r-1)+u[0][2]*c(n+1,r-1)+u[1][0]*c(n-1,r)+u[1][1]*c(n,r)+u[1][2]*c(n+1,r)+u[2][0]*c(n-1,r+1)+u[2][1]*c(n,r+1)+u[2][2]*c(n+1,r+1),v=l[0][0]*c(n-1,r-1)+l[0][1]*c(n,r-1)+l[0][2]*c(n+1,r-1)+l[1][0]*c(n-1,r)+l[1][1]*c(n,r)+l[1][2]*c(n+1,r)+l[2][0]*c(n-1,r+1)+l[2][1]*c(n,r+1)+l[2][2]*c(n+1,r+1),x=Math.sqrt(m*m+v*v)>>>0;f.push(x,x,x,255)}var b=f;return"function"==typeof Uint8ClampedArray&&(b=new Uint8ClampedArray(f)),b.toImageData=function(){return a.toImageData(b,o,i)},b}function o(t,e,n){return{width:e,height:n,data:t}}a.toImageData=function(t,e,n){if("function"==typeof ImageData&&"[object Uint16Array]"===Object.prototype.toString.call(t))return new ImageData(t,e,n);if("object"==typeof window&&"object"==typeof window.document){var r=document.createElement("canvas");if("function"==typeof r.getContext){var a=r.getContext("2d"),i=a.createImageData(e,n);return i.data.set(t),i}return new o(t,e,n)}return new o(t,e,n)},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=a),r.Sobel=a):"function"==typeof t&&t.amd?t([],function(){return a}):e.Sobel=a}(this)},{}],34:[function(t,e,n){function r(t,e,n,r){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLImageElement)return;var a=t.naturalWidth,i=t.naturalHeight;if("string"==typeof e)var e=document.getElementById(e);else if(!e instanceof HTMLCanvasElement)return;e.style.width=a+"px",e.style.height=i+"px",e.width=a,e.height=i;var l=e.getContext("2d");l.clearRect(0,0,a,i),l.drawImage(t,0,0),isNaN(n)||n<1||(r?o(e,0,0,a,i,n):u(e,0,0,a,i,n))}function a(t,e,n,r,a){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var o,i=t.getContext("2d");try{try{o=i.getImageData(e,n,r,a)}catch(t){throw new Error("unable to access local image data: "+t)}}catch(t){throw new Error("unable to access image data: "+t)}return o}function o(t,e,n,r,o,u){if(!(isNaN(u)||u<1)){u|=0;var l=a(t,e,n,r,o);l=i(l,e,n,r,o,u),t.getContext("2d").putImageData(l,e,n)}}function i(t,e,n,r,a,o){var i,u,l,c,g,y,p,h,m,v,x,b,w,_,C,M,P,k,D,O,j,I,S,T,B=t.data,E=o+o+1,N=r-1,W=a-1,R=o+1,J=R*(R+1)/2,A=new f,G=A;for(l=1;l<E;l++)if(G=G.next=new f,l==R)var L=G;G.next=A;var U=null,H=null;p=y=0;var q=d[o],F=s[o];for(u=0;u<a;u++){for(M=P=k=D=h=m=v=x=0,b=R*(O=B[y]),w=R*(j=B[y+1]),_=R*(I=B[y+2]),C=R*(S=B[y+3]),h+=J*O,m+=J*j,v+=J*I,x+=J*S,G=A,l=0;l<R;l++)G.r=O,G.g=j,G.b=I,G.a=S,G=G.next;for(l=1;l<R;l++)c=y+((N<l?N:l)<<2),h+=(G.r=O=B[c])*(T=R-l),m+=(G.g=j=B[c+1])*T,v+=(G.b=I=B[c+2])*T,x+=(G.a=S=B[c+3])*T,M+=O,P+=j,k+=I,D+=S,G=G.next;for(U=A,H=L,i=0;i<r;i++)B[y+3]=S=x*q>>F,0!=S?(S=255/S,B[y]=(h*q>>F)*S,B[y+1]=(m*q>>F)*S,B[y+2]=(v*q>>F)*S):B[y]=B[y+1]=B[y+2]=0,h-=b,m-=w,v-=_,x-=C,b-=U.r,w-=U.g,_-=U.b,C-=U.a,c=p+((c=i+o+1)<N?c:N)<<2,M+=U.r=B[c],P+=U.g=B[c+1],k+=U.b=B[c+2],D+=U.a=B[c+3],h+=M,m+=P,v+=k,x+=D,U=U.next,b+=O=H.r,w+=j=H.g,_+=I=H.b,C+=S=H.a,M-=O,P-=j,k-=I,D-=S,H=H.next,y+=4;p+=r}for(i=0;i<r;i++){for(P=k=D=M=m=v=x=h=0,y=i<<2,b=R*(O=B[y]),w=R*(j=B[y+1]),_=R*(I=B[y+2]),C=R*(S=B[y+3]),h+=J*O,m+=J*j,v+=J*I,x+=J*S,G=A,l=0;l<R;l++)G.r=O,G.g=j,G.b=I,G.a=S,G=G.next;for(g=r,l=1;l<=o;l++)y=g+i<<2,h+=(G.r=O=B[y])*(T=R-l),m+=(G.g=j=B[y+1])*T,v+=(G.b=I=B[y+2])*T,x+=(G.a=S=B[y+3])*T,M+=O,P+=j,k+=I,D+=S,G=G.next,l<W&&(g+=r);for(y=i,U=A,H=L,u=0;u<a;u++)c=y<<2,B[c+3]=S=x*q>>F,S>0?(S=255/S,B[c]=(h*q>>F)*S,B[c+1]=(m*q>>F)*S,B[c+2]=(v*q>>F)*S):B[c]=B[c+1]=B[c+2]=0,h-=b,m-=w,v-=_,x-=C,b-=U.r,w-=U.g,_-=U.b,C-=U.a,c=i+((c=u+R)<W?c:W)*r<<2,h+=M+=U.r=B[c],m+=P+=U.g=B[c+1],v+=k+=U.b=B[c+2],x+=D+=U.a=B[c+3],U=U.next,b+=O=H.r,w+=j=H.g,_+=I=H.b,C+=S=H.a,M-=O,P-=j,k-=I,D-=S,H=H.next,y+=r}return t}function u(t,e,n,r,o,i){if(!(isNaN(i)||i<1)){i|=0;var u=a(t,e,n,r,o);u=l(u,e,n,r,o,i),t.getContext("2d").putImageData(u,e,n)}}function l(t,e,n,r,a,o){var i,u,l,c,g,y,p,h,m,v,x,b,w,_,C,M,P,k,D,O,j=t.data,I=o+o+1,S=r-1,T=a-1,B=o+1,E=B*(B+1)/2,N=new f,W=N;for(l=1;l<I;l++)if(W=W.next=new f,l==B)var R=W;W.next=N;var J=null,A=null;p=y=0;var G=d[o],L=s[o];for(u=0;u<a;u++){for(_=C=M=h=m=v=0,x=B*(P=j[y]),b=B*(k=j[y+1]),w=B*(D=j[y+2]),h+=E*P,m+=E*k,v+=E*D,W=N,l=0;l<B;l++)W.r=P,W.g=k,W.b=D,W=W.next;for(l=1;l<B;l++)c=y+((S<l?S:l)<<2),h+=(W.r=P=j[c])*(O=B-l),m+=(W.g=k=j[c+1])*O,v+=(W.b=D=j[c+2])*O,_+=P,C+=k,M+=D,W=W.next;for(J=N,A=R,i=0;i<r;i++)j[y]=h*G>>L,j[y+1]=m*G>>L,j[y+2]=v*G>>L,h-=x,m-=b,v-=w,x-=J.r,b-=J.g,w-=J.b,c=p+((c=i+o+1)<S?c:S)<<2,_+=J.r=j[c],C+=J.g=j[c+1],M+=J.b=j[c+2],h+=_,m+=C,v+=M,J=J.next,x+=P=A.r,b+=k=A.g,w+=D=A.b,_-=P,C-=k,M-=D,A=A.next,y+=4;p+=r}for(i=0;i<r;i++){for(C=M=_=m=v=h=0,y=i<<2,x=B*(P=j[y]),b=B*(k=j[y+1]),w=B*(D=j[y+2]),h+=E*P,m+=E*k,v+=E*D,W=N,l=0;l<B;l++)W.r=P,W.g=k,W.b=D,W=W.next;for(g=r,l=1;l<=o;l++)y=g+i<<2,h+=(W.r=P=j[y])*(O=B-l),m+=(W.g=k=j[y+1])*O,v+=(W.b=D=j[y+2])*O,_+=P,C+=k,M+=D,W=W.next,l<T&&(g+=r);for(y=i,J=N,A=R,u=0;u<a;u++)c=y<<2,j[c]=h*G>>L,j[c+1]=m*G>>L,j[c+2]=v*G>>L,h-=x,m-=b,v-=w,x-=J.r,b-=J.g,w-=J.b,c=i+((c=u+B)<T?c:T)*r<<2,h+=_+=J.r=j[c],m+=C+=J.g=j[c+1],v+=M+=J.b=j[c+2],J=J.next,x+=P=A.r,b+=k=A.g,w+=D=A.b,_-=P,C-=k,M-=D,A=A.next,y+=r}return t}function f(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={image:r,canvasRGBA:o,canvasRGB:u,imageDataRGBA:i,imageDataRGB:l}},{}],35:[function(t,e,n){var r=arguments[3],a=arguments[4],o=arguments[5],i=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(o),u=0,l=n.length;u<l;u++){var f=n[u],d=o[f].exports;if(d===t||d.default===t){e=f;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var s={},u=0,l=n.length;u<l;u++){var f=n[u];s[f]=f}a[e]=[Function(["require","module","exports"],"("+t+")(self)"),s]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[e]=e,a[c]=[Function(["require"],"var f = require("+i(e)+");(f.default ? f.default : f)(self);"),g];var y="("+r+")({"+Object.keys(a).map(function(t){return i(t)+":["+a[t][0]+","+i(a[t][1])+"]"}).join(",")+"},{},["+i(c)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([y],{type:"text/javascript"})))}},{}]},{},[1])(1)});
